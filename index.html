<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Archaeobotany Bibliography</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f7f7f7; }
    h1, h2 { text-align: center; }
    input { padding: 8px; width: 100%; margin-bottom: 20px; }
    table { width: 100%; border-collapse: collapse; background: #fff; margin-bottom: 30px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background: #eee; }
    td div.zh { color: #555; font-size: 0.9em; margin-top: 2px; }
    a { text-decoration: none; color: #007BFF; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- React + ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // é¡¹ç›®æŠ¥å‘Šææ–™
    const initialReports = [
      {
        id: "abot-proj-2024",
        title: "ABOT Project Requirements 2024",
        titleZh: "ABOT é¡¹ç›®è¦æ±‚ 2024",
        pdfUrl: "./doc/ABOT_PROJ_2024.pdf",
        pdfZhUrl: "./doc/ABOT_PROJ_2024-zh.pdf",
      },
      {
        id: "abot-handbook",
        title: "ABOT Handbook",
        titleZh: "ABOT æ‰‹å†Œ",
        pdfUrl: "./doc/ABOT_HANDBOOK.pdf",
        pdfZhUrl: "./doc/ABOT_HANDBOOK-zh.pdf",
      }
    ];

    // å‚è€ƒæ–‡çŒ®
    const initialBibliography = [
      {
        id: "zeist-1984",
        title: "Archaeobotanical studies in the Levant 2: Neolithic and Halaf Levels at Ras Shamra",
        titleZh: "é»å‡¡ç‰¹åœ°åŒºçš„è€ƒå¤æ¤ç‰©å­¦ç ”ç©¶ 2ï¼šæ‹‰æ–¯æ²™å§†æ‹‰çš„æ–°çŸ³å™¨æ—¶ä»£ä¸å“ˆæ‹‰å¤«å±‚ä½",
        authors: "van Zeist, W. & Bakker-Heeres, J.A.H.",
        pdfUrl: "./pdf/zeist-1984.pdf",
        pdfZhUrl: "./pdf/zeist-1984-zh.pdf",
      },
      {
        id: "akkermans-2003",
        title: "The archaeology of Syria: from complex hunter-gatherers to early urban societies (c. 16,000-300 BC)",
        titleZh: "å™åˆ©äºšçš„è€ƒå¤å­¦ï¼šä»å¤æ‚çš„ç‹©çŒé‡‡é›†è€…åˆ°æ—©æœŸåŸå¸‚ç¤¾ä¼šï¼ˆçº¦å…¬å…ƒå‰16,000â€“300å¹´ï¼‰",
        authors: "Akkermans, P. & Schwartz, G.",
        pdfUrl: "./pdf/akkermans-2003.pdf",
        pdfZhUrl: "",
      },
      {
        id: "allen-2019",
        title: "Context and contents: Distinguishing variation in archaeobotanical assemblage formation processes at Early Halaf FistÄ±klÄ± HÃ¶yÃ¼k, Turkey",
        titleZh: "èƒŒæ™¯ä¸å†…å®¹ï¼šåŒºåˆ†åœŸè€³å…¶æ—©å“ˆæ‹‰å¤«æ—¶æœŸ FistÄ±klÄ± HÃ¶yÃ¼k è€ƒå¤æ¤ç‰©ç»„åˆå½¢æˆè¿‡ç¨‹ä¸­çš„å·®å¼‚",
        authors: "Allen, S.E.",
        pdfUrl: "./pdf/allen-2019.pdf",
        pdfZhUrl: "./pdf/allen-2019-zh.pdf",
      },
      {
        id: "ferrio-2012",
        title: "Agricultural expansion and settlement economy in Tell Halula (Mid-Euphrates valley): A diachronic study from early Neolithic to present",
        titleZh: "å“ˆé²æ‹‰é—å€ï¼ˆå¹¼å‘æ‹‰åº•æ²³ä¸­æ¸¸ï¼‰çš„å†œä¸šæ‰©å¼ ä¸èšè½ç»æµï¼šä»æ–°çŸ³å™¨æ—¶ä»£æ—©æœŸè‡³ä»Šçš„å†æ—¶æ€§ç ”ç©¶",
        authors: "Ferrio, J.P., Arab, G., BuxÃ³, R., Guerrero, E., Molist, M., Voltas, J. and Araus, J.L.",
        pdfUrl: "./pdf/ferrio-2012.pdf",
        pdfZhUrl: "./pdf/ferrio-2012-zh.pdf",
      },
      {
        id: "grossman-2013",
        title: "Rethinking Halaf and Ubaid animal economies: hunting and herding at Tell Zeidan (Syria)",
        titleZh: "é‡æ–°å®¡è§†å“ˆæ‹‰å¤«ä¸ä¹Œæ‹œå¾·æ—¶æœŸçš„åŠ¨ç‰©ç»æµï¼šå™åˆ©äºšæ³½ä¸¹é—å€çš„ç‹©çŒä¸ç•œç‰§ä¸š",
        authors: "Grossman, K. and Hinman, M.",
        pdfUrl: "./pdf/grossman-2013.pdf",
        pdfZhUrl: "./pdf/grossman-2013-zh.pdf",
      },
      {
        id: "jarl-2020",
        title: "Plant cultivation under climatic fluctuations during the sixth and fifth millennia BC at Tell Tawila (northern Syria)",
        titleZh: "å…¬å…ƒå‰å…­è‡³äº”åƒå¹´æ°”å€™æ³¢åŠ¨ä¸‹çš„æ¤ç‰©ç§æ¤ï¼šå™åˆ©äºšåŒ—éƒ¨å¡”ç»´æ‹‰é—å€ç ”ç©¶",
        authors: "Jarl, J., Riehl, S., Deckers, K. et al.",
        pdfUrl: "./pdf/jarl-2020.pdf",
        pdfZhUrl: "./pdf/jarl-2020-zh.pdf",
      },
      {
        id: "kansa-2009",
        title: "Resource exploitation at Late Neolithic Domuztepe: faunal and botanical evidence",
        titleZh: "æ–°çŸ³å™¨æ—¶ä»£æ™šæœŸå¤šç©†å…¹ç‰¹ä½©é—å€çš„èµ„æºåˆ©ç”¨ï¼šåŠ¨ç‰©ä¸æ¤ç‰©è¯æ®",
        authors: "Kansa, S.W., Kennedy, A., Campbell, S. and Carter, E.",
        pdfUrl: "./pdf/kansa-2009.pdf",
        pdfZhUrl: "./pdf/kansa-2009-zh.pdf",
      },
      {
        id: "mccorriston-1992",
        title: "The Halaf environment and human activities in the Khabur drainage, Syria",
        titleZh: "å™åˆ©äºšå“ˆå¸ƒå°”æµåŸŸçš„å“ˆæ‹‰å¤«æ—¶æœŸç¯å¢ƒä¸äººç±»æ´»åŠ¨",
        authors: "McCorriston, J.",
        pdfUrl: "./pdf/mccorriston-1992.pdf",
        pdfZhUrl: "./pdf/mccorriston-1992-zh.pdf",
      },
      {
        id: "mccorriston-2002",
        title: "Spatial and temporal variation in Mesopotamian agricultural practices in the Khabur Basin, Syrian Jazira",
        titleZh: "å™åˆ©äºšæ°æµæ‹‰åœ°åŒºå“ˆå¸ƒå°”ç›†åœ°çš„ç¾ç´¢ä¸è¾¾ç±³äºšå†œä¸šå®è·µæ—¶ç©ºå˜åŒ–",
        authors: "McCorriston, J. and Weisberg, S.",
        pdfUrl: "./pdf/mccorriston-2002.pdf",
        pdfZhUrl: "./pdf/mccorriston-2002-zh.pdf",
      },
      {
        id: "mccorriston-2007",
        title: "Cultural and environmental history in archaeological charred woods from the Khabur drainage, upper Mesopotamia",
        titleZh: "æ¥è‡ªç¾ç´¢ä¸è¾¾ç±³äºšä¸Šæ¸¸å“ˆå¸ƒå°”æµåŸŸè€ƒå¤ç‚­åŒ–æœ¨çš„æ–‡åŒ–ä¸ç¯å¢ƒå²ç ”ç©¶",
        authors: "McCorriston, J.",
        pdfUrl: "./pdf/mccorriston-2007.pdf",
        pdfZhUrl: "./pdf/mccorriston-2007-zh.pdf",
      },
      {
        id: "moffet-2003",
        title: "Wild and cultivated food plants and the evidence for crop processing activities at Arjoune",
        titleZh: "é˜¿å°”æœ±æ©é—å€çš„é‡ç”Ÿä¸æ ½åŸ¹é£Ÿç”¨æ¤ç‰©åŠä½œç‰©åŠ å·¥æ´»åŠ¨çš„è¯æ®",
        authors: "Moffet, L.",
        pdfUrl: "https://www.fulcrum.org/epubs/pz50gz01m#page=250",
        pdfZhUrl: "",
      }
    ];

    function App() {
      const [search, setSearch] = useState("");
      const [bibliography, setBibliography] = useState(() => {
        const stored = localStorage.getItem("bibliography");
        return stored ? JSON.parse(stored) : initialBibliography;
      });

      useEffect(() => {
        localStorage.setItem("bibliography", JSON.stringify(bibliography));
      }, [bibliography]);

      const filtered = bibliography.filter(item =>
        item.title.toLowerCase().includes(search.toLowerCase()) ||
        item.authors.toLowerCase().includes(search.toLowerCase()) ||
        (item.titleZh && item.titleZh.includes(search))
      );

      const renderLink = (url, text) => {
        if (url && url.trim() !== "") {
          return <a href={url} target="_blank" rel="noopener noreferrer">{text}</a>;
        }
        return null;
      };

      return (
        <div>
          <h1>Archaeobotany Bibliography</h1>

          {/* é¡¹ç›®ææ–™éƒ¨åˆ† */}
          <h2>Project Reports / é¡¹ç›®ææ–™</h2>
          <table>
            <thead>
              <tr>
                <th>Title / æ ‡é¢˜</th>
                <th>PDF (EN)</th>
                <th>PDF (ä¸­æ–‡)</th>
              </tr>
            </thead>
            <tbody>
              {initialReports.map(report => (
                <tr key={report.id}>
                  <td>
                    <div>{report.title}</div>
                    <div className="zh">{report.titleZh}</div>
                  </td>
                  <td>{renderLink(report.pdfUrl, "View")}</td>
                  <td>{renderLink(report.pdfZhUrl, "æŸ¥çœ‹")}</td>
                </tr>
              ))}
            </tbody>
          </table>

          {/* æœç´¢æ¡† + å‚è€ƒæ–‡çŒ® */}
          <h2>Bibliography / å‚è€ƒæ–‡çŒ®</h2>
          <input
            type="text"
            placeholder="Search by title, author, or ä¸­æ–‡æ ‡é¢˜..."
            value={search}
            onChange={e => setSearch(e.target.value)}
          />
          <table>
            <thead>
              <tr>
                <th>Title / æ ‡é¢˜</th>
                <th>Authors</th>
                <th>PDF (EN)</th>
                <th>PDF (ä¸­æ–‡)</th>
              </tr>
            </thead>
            <tbody>
              {filtered.map(item => (
                <tr key={item.id}>
                  <td>
                    <div>{item.title}</div>
                    <div className="zh">{item.titleZh}</div>
                  </td>
                  <td>{item.authors}</td>
                  <td>{renderLink(item.pdfUrl, "View")}</td>
                  <td>{renderLink(item.pdfZhUrl, "æŸ¥çœ‹")}</td>
                </tr>
              ))}
            </tbody>
          </table>

          {/* æ·»åŠ æ–°å‚è€ƒæ–‡çŒ®è¯·æ±‚è¡¨å• */}
          <h2>Request Additional References / è¯·æ±‚æ·»åŠ å‚è€ƒæ–‡çŒ®</h2>
          <p style={{ textAlign: "center" }}>
            <a 
              href="https://docs.google.com/forms/d/e/1FAIpQLScJQya8w_vExs1SESSMDzHvYNNZ7kfbFq3xmUL6nR26wYcAcA/viewform?usp=dialog" 
              target="_blank" 
              rel="noopener noreferrer"
              style={{ fontSize: "1.1em", fontWeight: "bold" }}
            >
              ğŸ“‘ Fill out the Google Form / å¡«å†™è¡¨å•
            </a>
          </p>

        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
